(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{202:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s(2),r=s(27),c=s.n(r),i=(s(80),s(5)),o=s(6),l=s(9),h=s(8),d=s(7),u=s(10),b=(s(47),s(81),s(29)),j=s.n(b),p="https://eshopapi.ddns.net/api/auth/",m=new(function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"login",value:function(e,t){return j.a.post(p+"signin",{display_name:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,s){return j.a.post(p+"signup",{display_name:e,email:t,password:s})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),g=s(22),v=s.n(g),O=s(33),x=s.n(O),f=s(23),y=s.n(f),k=s(34),N=s.n(k),S=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},w=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).handleLogin=a.handleLogin.bind(Object(l.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(l.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(l.a)(a)),a.state={username:"",password:"",loading:!1,message:""},a}return Object(o.a)(s,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?m.login(this.state.username,this.state.password).then((function(){t.props.history.push("/profile"),window.location.reload()}),(function(e){var s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:s})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(x.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[S]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(y.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[S]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("button",{className:"button b-alt",style:{width:"100%"},disabled:this.state.loading,children:[this.state.loading&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(a.jsx)("span",{children:"Login"})]})}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(N.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),s}(n.Component),C=s(73),P=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},B=function(e){if(!Object(C.isEmail)(e))return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},A=function(e){if(e.length<3||e.length>20)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},L=function(e){if(e.length<6||e.length>40)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},R=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).handleRegister=a.handleRegister.bind(Object(l.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(l.a)(a)),a.onChangeEmail=a.onChangeEmail.bind(Object(l.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(l.a)(a)),a.state={username:"",email:"",password:"",successful:!1,message:""},a}return Object(o.a)(s,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&m.register(this.state.username,this.state.email,this.state.password).then((function(e){t.setState({message:e.data.message,successful:!0})}),(function(e){var s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({successful:!1,message:s})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(x.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t},children:[!this.state.successful&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[P,A]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[P,B]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(y.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[P,L]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("button",{className:"button b-alt",style:{width:"100%"},children:"Sign Up"})})]}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(N.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),s}(n.Component),U=s(74),I=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={},e.submit=e.submit.bind(Object(l.a)(e)),e}return Object(o.a)(s,[{key:"submit",value:function(e){var t=e.target[0].value;this.props.history.push("/search/"+t),this.props.notSearch(),e.preventDefault()}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("form",{action:"#",method:"#",role:"search",onSubmit:this.submit,children:Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("input",{className:"form-control form-control-search",placeholder:"Search for products or use the navigation above. . .",name:"srch-term",id:"ed-srch-term",type:"text"}),Object(a.jsx)("div",{className:"input-btn",children:Object(a.jsx)("button",{type:"submit",id:"searchbtn",children:Object(a.jsx)(U.a,{})})})]})})})}}]),s}(n.Component),T=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={content:""},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"container",style:{display:"flex",justifyContent:"center",margin:"auto",padding:"60px 15px",background:"var(--background-2)"},children:Object(a.jsx)("header",{className:"",style:{width:"100%"},children:Object(a.jsx)(I,{history:this.props.history,notSearch:this.props.notSearch})})})}}]),s}(n.Component),D=s(11),_=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={redirect:null,userReady:!1,currentUser:{username:""},savedBaskets:[]},a}return Object(o.a)(s,[{key:"getBaskets",value:function(){fetch()}},{key:"componentDidMount",value:function(){var e=m.getCurrentUser();e||this.setState({redirect:"/home"}),this.setState({currentUser:e,userReady:!0})}},{key:"render",value:function(){if(this.state.redirect)return Object(a.jsx)(u.a,{to:this.state.redirect});var e=this.state,t=e.currentUser,s=e.savedBaskets.map((function(e){}));return Object(a.jsxs)("div",{className:"container",children:[this.state.userReady?Object(a.jsxs)("div",{children:[Object(a.jsxs)("header",{className:"jumbotron",children:[Object(a.jsxs)("h3",{children:[Object(a.jsx)("strong",{children:t.display_name}),"'s Profile"]}),Object(a.jsx)(D.b,{to:"/settings",className:"button",children:"Edit Settings"})]}),Object(a.jsx)("hr",{})]}):null,Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Saved Baskets"}),s]})]})}}]),s}(n.Component);function M(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var E=new(function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"getUserBoard",value:function(){return j.a.get("https://eshopapi.ddns.net/api/test/user",{headers:M()})}}]),e}()),F=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={content:""},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;E.getUserBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h3",{children:this.state.content})})})}}]),s}(n.Component),W=s(38),z=s.n(W),H=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={shops:{asda:"https://upload.wikimedia.org/wikipedia/en/thumb/9/91/Asda_logo.svg/300px-Asda_logo.svg.png",tesco:"https://upload.wikimedia.org/wikipedia/en/thumb/b/b0/Tesco_Logo.svg/200px-Tesco_Logo.svg.png",aldi:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/AldiWorldwideLogo.svg/500px-AldiWorldwideLogo.svg.png",sains:"https://upload.wikimedia.org/wikipedia/commons/d/d7/Sainsbury%27s_Logo.svg",coop:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/The_Co-Operative_clover_leaf_logo.svg/500px-The_Co-Operative_clover_leaf_logo.svg.png"}},e}return Object(o.a)(s,[{key:"getShop",value:function(){var e=this.props.product.shop;return this.state.shops[e]}},{key:"findRibbon",value:function(){switch(this.props.index){case 1:return Object(a.jsx)(z.a,{position:"top-left",fontColor:"white",backgroundColor:"#D6AF36",style:{fontSize:"10px"},children:"Best Value"});case 2:return Object(a.jsx)(z.a,{position:"top-left",fontColor:"white",backgroundColor:"#b4b4b4",style:{fontSize:"10px"},children:"2nd"});case 3:return Object(a.jsx)(z.a,{position:"top-left",fontColor:"white",backgroundColor:"#6a3805",style:{fontSize:"10px"},children:"3rd"});default:return}}},{key:"render",value:function(){return Object(a.jsx)("a",{href:this.props.product.url,className:"product",children:Object(a.jsxs)("div",{className:"product2",style:{display:"flex",position:"relative",width:"80%",margin:"auto",border:"1px outset black",borderCollapse:"collapse"},children:[this.findRibbon(),Object(a.jsx)("div",{className:"typeSec",children:Object(a.jsx)("img",{src:this.getShop(),alt:this.props.product.shop,className:"ShopIcon"})}),Object(a.jsx)("div",{style:{borderLeft:"1px solid #dbdbdb",marginRight:"20px"}}),Object(a.jsxs)("div",{className:"InfoSec",children:[Object(a.jsx)("p",{children:this.props.product.product_name}),Object(a.jsxs)("p",{style:{fontSize:"0.8em"},children:["Price: ",this.props.product.product_price]})]})]})})}}]),s}(n.Component),J=s(30),G=s.n(J),V=s(25),Z=s.n(V),q=s(12),K=s(37),Q=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(o.a)(s,[{key:"render",value:function(){var e=[{value:"1",label:"Product Names A-Z"},{value:"2",label:"Product Names Z-A"},{value:"3",label:"Product Price LOW-HIGH"},{value:"4",label:"Product Price HIGH-LOW"}],t={select:function(e){return Object(q.a)(Object(q.a)({},e),{},{border:"0px"})},option:function(e,t){return Object(q.a)(Object(q.a)({},e),{},{background:"var(--background-1)"})}};return Object(a.jsx)("div",{style:{width:"15%",display:"flex",float:"left",flexGrow:"2",flexDirection:"column"},children:Object(a.jsxs)("form",{className:this.props.loading?"hidden":"form-visable",onSubmit:this.props.submitRefiner,children:[Object(a.jsxs)("p",{style:{marginTop:"10pt"},children:[this.props.products," products found"]}),Object(a.jsx)("hr",{}),Object(a.jsx)("h4",{style:{textAlign:"center"},children:"Filter Browse"}),Object(a.jsx)("input",{className:"form-control form-control-search-2",type:"text",name:"term"}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"shops",style:{display:"grid"},children:[Object(a.jsx)("label",{htmlFor:"asda",className:"browseShopLabels",style:{gridRow:"1"},children:"Asda"}),Object(a.jsx)("input",{type:"checkbox",name:"asda",className:"browseCheckboxes",style:{gridRow:"1"}}),Object(a.jsx)("label",{htmlFor:"aldi",className:"browseShopLabels",style:{gridRow:"2"},children:"Aldi"}),Object(a.jsx)("input",{type:"checkbox",name:"aldi",className:"browseCheckboxes",style:{gridRow:"2"}}),Object(a.jsx)("label",{htmlFor:"tesco",className:"browseShopLabels",style:{gridRow:"3"},children:"Tesco"}),Object(a.jsx)("input",{type:"checkbox",name:"tesco",className:"browseCheckboxes",style:{gridRow:"3"}}),Object(a.jsx)("label",{htmlFor:"sains",className:"browseShopLabels",style:{gridRow:"4"},children:"Sainsburys"}),Object(a.jsx)("input",{type:"checkbox",name:"sains",className:"browseCheckboxes",style:{gridRow:"4"}}),Object(a.jsx)("label",{htmlFor:"coop",className:"browseShopLabels",style:{gridRow:"5"},children:"CoOp"}),Object(a.jsx)("input",{type:"checkbox",name:"coop",className:"browseCheckboxes",style:{gridRow:"5"}})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("p",{children:"Product Ordering"}),Object(a.jsx)(K.a,{defaultValue:e[0],label:"Single select",options:e,style:t,onChange:this.props.handleSelect,theme:function(e){return Object(q.a)(Object(q.a)({},e),{},{borderRadius:"10px",colors:Object(q.a)(Object(q.a)({},e.colors),{},{primary:"var(--accent-1)",primary25:"var(--background-1)",primary50:"var(--text-1)",primary75:"var(--text-1)",neutral0:"var(--background-2)",neutral80:"var(--text-1)"})})}}),Object(a.jsx)("hr",{}),Object(a.jsx)("input",{type:"submit",value:"Update Browse",className:"button"})]})})}}]),s}(n.Component),X=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={open:!1},e}return Object(o.a)(s,[{key:"toggleMenu",value:function(){this.state.open?this.setState({open:!1}):this.setState({open:!0})}},{key:"getVisable",value:function(){}},{key:"render",value:function(){var e=[{value:"1",label:"Product Names A-Z"},{value:"2",label:"Product Names Z-A"},{value:"3",label:"Product Price LOW-HIGH"},{value:"4",label:"Product Price HIGH-LOW"}],t={select:function(e){return Object(q.a)(Object(q.a)({},e),{},{border:"0px"})},option:function(e,t){return Object(q.a)(Object(q.a)({},e),{},{background:"var(--background-1)"})}};return Object(a.jsxs)("div",{className:this.props.loading?"hidden":"",children:[Object(a.jsx)("button",{style:{margin:"10pt"},className:"button",onClick:this.toggleMenu.bind(this),children:"Refine Browse"}),Object(a.jsxs)("form",{className:this.state.open?"form-visable-mob":"hidden",onSubmit:this.props.submitRefiner,style:{width:"95%",margin:"auto",border:"1px solid black",marginBottom:"10pt",backgroundColor:"var(--background-2)"},children:[Object(a.jsxs)("p",{style:{padding:"5pt"},children:[this.props.products," products found"]}),Object(a.jsx)("hr",{}),Object(a.jsx)("input",{type:"text",name:"term",className:"form-control form-control-search-2",style:{width:"80%",margin:"auto"}}),Object(a.jsxs)("div",{className:"shops",style:{display:"grid",width:"70%",margin:"auto"},children:[Object(a.jsx)("label",{htmlFor:"asda",className:"browseShopLabels",style:{gridRow:"1"},children:"Asda"}),Object(a.jsx)("input",{type:"checkbox",name:"asda",className:"browseCheckboxes",style:{gridRow:"1"}}),Object(a.jsx)("label",{htmlFor:"aldi",className:"browseShopLabels",style:{gridRow:"2"},children:"Aldi"}),Object(a.jsx)("input",{type:"checkbox",name:"aldi",className:"browseCheckboxes",style:{gridRow:"2"}}),Object(a.jsx)("label",{htmlFor:"tesco",className:"browseShopLabels",style:{gridRow:"3"},children:"Tesco"}),Object(a.jsx)("input",{type:"checkbox",name:"tesco",className:"browseCheckboxes",style:{gridRow:"3"}}),Object(a.jsx)("label",{htmlFor:"sains",className:"browseShopLabels",style:{gridRow:"4"},children:"Sainsburys"}),Object(a.jsx)("input",{type:"checkbox",name:"sains",className:"browseCheckboxes",style:{gridRow:"4"}}),Object(a.jsx)("label",{htmlFor:"coop",className:"browseShopLabels",style:{gridRow:"5"},children:"CoOp"}),Object(a.jsx)("input",{type:"checkbox",name:"coop",className:"browseCheckboxes",style:{gridRow:"5"}})]}),Object(a.jsx)(K.a,{defaultValue:e[0],label:"Single select",options:e,style:t,onChange:this.props.handleSelect,theme:function(e){return Object(q.a)(Object(q.a)({},e),{},{borderRadius:"10px",colors:Object(q.a)(Object(q.a)({},e.colors),{},{primary:"var(--accent-1)",primary25:"var(--background-1)",primary50:"var(--text-1)",primary75:"var(--text-1)",neutral0:"var(--background-2)",neutral80:"var(--text-1)"})})}}),Object(a.jsx)("input",{type:"submit",className:"button",value:"Update Browse",style:{width:"80%",margin:"auto",marginBottom:"10pt",backgroundColor:"var(--background-1)"}})]})]})}}]),s}(n.Component),Y=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={loading:!0,reloading:!1,products:[],refine:{term:"",shops:{asda:"1",coop:"1",tesco:"1",aldi:"1",sains:"1"},orderby:"1"},currentPage:1,productsPerPage:100,upperPageBound:7,lowerPageBound:0,isPrevBtnActive:"disabled",isNextBtnActive:"",pageBound:7},e.handleClick=e.handleClick.bind(Object(l.a)(e)),e.btnDecrementClick=e.btnDecrementClick.bind(Object(l.a)(e)),e.btnIncrementClick=e.btnIncrementClick.bind(Object(l.a)(e)),e.btnNextClick=e.btnNextClick.bind(Object(l.a)(e)),e.btnPrevClick=e.btnPrevClick.bind(Object(l.a)(e)),e.setPrevAndNextBtnClass=e.setPrevAndNextBtnClass.bind(Object(l.a)(e)),e.submitRefiner=e.submitRefiner.bind(Object(l.a)(e)),e.handleSelect=e.handleSelect.bind(Object(l.a)(e)),e}return Object(o.a)(s,[{key:"callAPI",value:function(){var e=this;this.setState({reloading:!0}),fetch("https://eshopapi.ddns.net/api/browse",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(this.state.refine)}).then((function(e){return e.json()})).then((function(t){return e.setState({loading:!1,reloading:!1,products:t})}))}},{key:"componentDidUpdate",value:function(){G()("ul li.active").removeClass("active"),G()("ul li#"+this.state.currentPage).addClass("active")}},{key:"handleClick",value:function(e){var t=Number(e.target.id);this.setState({currentPage:t}),G()("ul li.active").removeClass("active"),G()("ul li#"+t).addClass("active"),this.setPrevAndNextBtnClass(t)}},{key:"setPrevAndNextBtnClass",value:function(e){var t=Math.ceil(this.state.products.length/this.state.productsPerPage);this.setState({isNextBtnActive:"disabled"}),this.setState({isPrevBtnActive:"disabled"}),t===e&&t>1?this.setState({isPrevBtnActive:""}):1===e&&t>1?this.setState({isNextBtnActive:""}):t>1&&(this.setState({isNextBtnActive:""}),this.setState({isPrevBtnActive:""}))}},{key:"btnIncrementClick",value:function(){this.setState({upperPageBound:this.state.upperPageBound+this.state.pageBound}),this.setState({lowerPageBound:this.state.lowerPageBound+this.state.pageBound});var e=this.state.upperPageBound+1;this.setState({currentPage:e}),this.setPrevAndNextBtnClass(e)}},{key:"btnDecrementClick",value:function(){this.setState({upperPageBound:this.state.upperPageBound-this.state.pageBound}),this.setState({lowerPageBound:this.state.lowerPageBound-this.state.pageBound});var e=this.state.upperPageBound-this.state.pageBound;this.setState({currentPage:e}),this.setPrevAndNextBtnClass(e)}},{key:"btnPrevClick",value:function(){(this.state.currentPage-1)%this.state.pageBound===0&&(this.setState({upperPageBound:this.state.upperPageBound-this.state.pageBound}),this.setState({lowerPageBound:this.state.lowerPageBound-this.state.pageBound}));var e=this.state.currentPage-1;this.setState({currentPage:e}),this.setPrevAndNextBtnClass(e)}},{key:"btnNextClick",value:function(){this.state.currentPage+1>this.state.upperPageBound&&(this.setState({upperPageBound:this.state.upperPageBound+this.state.pageBound}),this.setState({lowerPageBound:this.state.lowerPageBound+this.state.pageBound}));var e=this.state.currentPage+1;this.setState({currentPage:e}),this.setPrevAndNextBtnClass(e)}},{key:"handleSelect",value:function(e){var t=e.value;this.setState({refine:{term:this.state.refine.term,shops:{asda:this.state.refine.shops.asda,coop:this.state.refine.shops.coop,tesco:this.state.refine.shops.tesco,aldi:this.state.refine.shops.aldi,sains:this.state.refine.shops.sains},orderby:t}})}},{key:"submitRefiner",value:function(e){var t=this,s=e.target;this.setState({refine:{term:s[0].value,shops:{asda:s[1].checked?1:0,coop:s[5].checked?1:0,tesco:s[3].checked?1:0,aldi:s[2].checked?1:0,sains:s[4].checked?1:0},orderby:this.state.refine.orderby}},(function(){console.log(t.state),t.callAPI()})),e.preventDefault()}},{key:"componentDidMount",value:function(){this.callAPI()}},{key:"render",value:function(){for(var e=this,t=this.state,s=t.products,n=t.currentPage,r=t.productsPerPage,c=t.upperPageBound,i=t.lowerPageBound,o=t.isPrevBtnActive,l=t.isNextBtnActive,h=n*r,d=h-r,u=s.slice(d,h).map((function(e){return Object(a.jsx)(H,{product:e},e.url)})),b=[],j=1;j<=Math.ceil(s.length/r);j++)b.push(j);var p=b.map((function(t){return 1===t&&1===n?Object(a.jsx)("li",{className:"page-item active",id:t,children:Object(a.jsx)("a",{href:"#",className:"page-link",onClick:e.handleClick,children:t})},t):t<c+1&&t>i?Object(a.jsx)("li",{className:"page-item",id:t,children:Object(a.jsx)("a",{href:"#",className:"page-link",id:t,onClick:e.handleClick,children:t})},t):void 0})),m=null;b.length>c&&(m=Object(a.jsx)("li",{className:"page-item",children:Object(a.jsx)("a",{href:"#",className:"page-link",onClick:this.btnIncrementClick,children:" \u2026 "})}));var g=null;i>=1&&(g=Object(a.jsx)("li",{className:"page-item",children:Object(a.jsx)("a",{href:"#",className:"page-link",onClick:this.btnDecrementClick,children:" \u2026 "})}));var O=null;O="disabled"===o?Object(a.jsx)("li",{className:o,children:Object(a.jsx)("span",{id:"btnPrev",className:"page-link disabled",style:{color:"grey"},children:" Prev "})}):Object(a.jsx)("li",{className:o,children:Object(a.jsx)("a",{href:"#",id:"btnPrev",className:"page-link",onClick:this.btnPrevClick,children:" Prev "})});var x=null;return x="disabled"===l?Object(a.jsx)("li",{className:l,children:Object(a.jsx)("span",{id:"btnNext",className:"page-link disabled",style:{color:"grey"},children:" Next "})}):Object(a.jsx)("li",{className:l,children:Object(a.jsx)("a",{href:"#",id:"btnNext",className:"page-link",onClick:this.btnNextClick,children:" Next "})}),Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(Z.a,{css:"display: block;margin: 0 auto;border-color: red;",size:150,color:"var(--accent-1)",loading:this.state.loading}),Object(a.jsxs)("p",{className:this.state.loading?"":"hidden",style:{textAlign:"center"},children:[Object(a.jsx)("br",{}),"Loading"]}),Object(a.jsxs)("div",{className:"browseProds",children:[Object(a.jsx)(v.a,{minWidth:1224,children:Object(a.jsx)(Q,{loading:this.state.loading,products:this.state.products.length,handleSelect:this.handleSelect,submitRefiner:this.submitRefiner})}),Object(a.jsx)(v.a,{maxWidth:1224,children:Object(a.jsx)(X,{loading:this.state.loading,products:this.state.products.length,handleSelect:this.handleSelect,submitRefiner:this.submitRefiner})}),Object(a.jsxs)("ul",{className:this.state.loading?"hidden":"xyz",children:[Object(a.jsx)(Z.a,{css:"display: block;margin: 0 auto;border-color: red;",size:150,color:"var(--accent-1)",loading:this.state.reloading}),Object(a.jsx)("div",{className:this.state.reloading?"hidden":"",children:u})]})]}),Object(a.jsxs)("ul",{className:this.state.loading||this.state.reloading?"hidden":"pagination",children:[O,g,p,m,x]})]})}}]),s}(n.Component),$=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={search:{term:""},results:[],loading:!0,reloading:!1},e}return Object(o.a)(s,[{key:"callAPI",value:function(){var e=this;this.setState({reloading:!0}),fetch("https://eshopapi.ddns.net/api/search",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(this.state.search)}).then((function(e){return e.json()})).then((function(t){e.setState({loading:!1,reloading:!1,results:t})})).catch((function(t){e.setState({loading:!1,reloading:!1,results:[{url:"",product_name:"No Products Found for that name",product_price:"",product_additionals:"Search again for more results"}]})}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({search:{term:this.props.match.params.term}},(function(){e.callAPI()}))}},{key:"render",value:function(){var e=this.state.results.map((function(e,t){return Object(a.jsx)(H,{product:e,index:t+1},e.url)}));return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(Z.a,{css:"display: block;margin: 0 auto;border-color: red;",size:150,color:"var(--accent-1)",loading:this.state.loading}),Object(a.jsxs)("p",{className:this.state.loading?"":"hidden",style:{textAlign:"center"},children:[Object(a.jsx)("br",{}),"Loading"]}),Object(a.jsx)("br",{className:this.state.loading?"hidden":"xyx"}),Object(a.jsx)("h1",{className:this.state.loading?"hidden":"",style:{textAlign:"center"},children:"Search Results"}),Object(a.jsx)("hr",{className:this.state.loading?"hidden":""}),Object(a.jsx)("div",{className:"browseProds",children:Object(a.jsxs)("ul",{className:this.state.loading?"hidden":"xyx",children:[Object(a.jsx)(Z.a,{css:"display: block;margin: 0 auto;border-color: red;",size:150,color:"#123abc",loading:this.state.reloading}),Object(a.jsx)("div",{className:this.state.reloading?"hidden":"",children:e})]})})]})}}]),s}(n.Component),ee=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(o.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("h1",{children:[Object(a.jsx)("strong",{children:"404"})," not found"]})}}]),s}(n.Component),te=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={redirect:null,userReady:!1,currentUser:{username:""},userInfo:{display_name:"",email:""}},a}return Object(o.a)(s,[{key:"setTheme",value:function(e){!0===e.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark"),document.getElementsByClassName("navbar-brand")[0].children[0].src="eshoplogodark.png"):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"),document.getElementsByClassName("navbar-brand")[0].children[0].src="eshoplogolight.png")}},{key:"getDetails",value:function(e){var t=this;fetch("https://eshopapi.ddns.net/api/user",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return t.setState({userInfo:e[0]})}))}},{key:"formatTime",value:function(){var e=this.state.userInfo.createdAt;return new Date(e).toLocaleTimeString(void 0,{year:"numeric",month:"long",day:"numeric"})}},{key:"componentDidMount",value:function(){var e=m.getCurrentUser();this.getDetails(e),"dark"===(localStorage.getItem("theme")?localStorage.getItem("theme"):null)&&(document.getElementById("checkbox").checked=!0),e||this.setState({redirect:"/home"})}},{key:"render",value:function(){return this.state.redirect?Object(a.jsx)(u.a,{to:this.state.redirect}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Account Settings"}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{style:{textAlign:"center"},children:["User Name: ",this.state.userInfo.display_name,Object(a.jsx)("br",{}),"Email: ",this.state.userInfo.email,Object(a.jsx)("br",{}),"Date Created: ",this.formatTime()]}),Object(a.jsxs)("div",{style:{width:"max-content",display:"flex",justifyContent:"center",margin:"auto"},children:[Object(a.jsx)("em",{style:{margin:"auto",marginRight:"10px"},children:"Theme (light/dark):"}),Object(a.jsx)("div",{className:"theme-switch-wrapper",style:{width:"max-content"},children:Object(a.jsxs)("label",{className:"theme-switch",htmlFor:"checkbox",children:[Object(a.jsx)("input",{type:"checkbox",id:"checkbox",onChange:this.setTheme}),Object(a.jsx)("div",{className:"slider round"})]})})]})]})}}]),s}(n.Component),se=s(21),ae=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){localStorage.getItem("theme");document.getElementsByClassName("navbar-brand")[0].children[0].src="eshoplogolight.png"}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsx)(D.b,{to:"/",className:"navbar-brand",onClick:this.props.search,children:Object(a.jsx)("img",{src:this.props.getLogo,alt:"Eshop Logo",style:{height:"40px"}})}),Object(a.jsx)("div",{className:"navbar-nav mr-auto",children:Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(D.b,{to:"/browse",className:"nav-link",onClick:this.props.notSearch,children:"Browse"})})}),this.props.currentUser?Object(a.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{className:"nav-item",style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(a.jsx)(D.b,{to:"/profile",onClick:this.props.notSearch,style:{display:"flex",color:"var(--text-1)"},children:Object(a.jsx)(se.c,{className:"profile",style:{height:"1.1em",width:"1.1em"}})})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"/login",className:"nav-link",onClick:this.props.logOut,children:"Logout"})})]}):Object(a.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(D.b,{to:"/login",className:"nav-link",onClick:this.props.notSearch,children:"Login"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(D.b,{to:"/register",className:"nav-link",onClick:this.props.notSearch,children:"Sign Up"})})]})]})}}]),s}(n.Component),ne=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(o.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:this.props.open?"closed":"open",id:"myNavbar",children:[Object(a.jsx)("div",{className:"navbar-nav mr-auto",children:Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(D.b,{to:"/home",className:"nav-link",onClick:this.props.search,children:"Home"})})}),Object(a.jsx)("div",{className:"navbar-nav mr-auto",children:Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(D.b,{to:"/browse",className:"nav-link",onClick:this.props.notSearch,children:"Browse"})})}),this.props.currentUser?Object(a.jsxs)("div",{className:"navbar-nav bottom",children:[Object(a.jsx)("li",{className:"nav-item",style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(a.jsx)(D.b,{to:"/profile",onClick:this.props.notSearch,style:{display:"flex",color:"var(--text-1)",justifyContent:"center"},children:Object(a.jsx)(se.c,{className:"profile",style:{height:"1.6em",width:"1.6em"}})})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"/login",className:"nav-link",onClick:this.props.logOut,children:"Logout"})})]}):Object(a.jsxs)("div",{className:"navbar-nav bottom",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(D.b,{to:"/login",className:"nav-link",onClick:this.props.notSearch,children:"Login"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(D.b,{to:"/register",className:"nav-link",onClick:this.props.notSearch,children:"Sign Up"})})]})]})})}}]),s}(n.Component),re=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){localStorage.getItem("theme");document.getElementsByClassName("navbar-brand")[0].children[0].src="eshoplogolight.png"}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsx)(D.b,{to:"/",className:"navbar-brand",onClick:this.props.search,children:Object(a.jsx)("img",{src:this.props.getLogo,alt:"Eshop Logo",style:{height:"40px"}})}),Object(a.jsx)("div",{className:"navbar-nav ml-auto",children:Object(a.jsx)("button",{style:{margin:"10pt"},className:"button",onClick:this.props.toggleMenu,children:this.props.open?Object(a.jsx)(se.a,{}):Object(a.jsx)(se.b,{})})})]})}}]),s}(n.Component),ce=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).logOut=a.logOut.bind(Object(l.a)(a)),a.notSearch=a.notSearch.bind(Object(l.a)(a)),a.search=a.search.bind(Object(l.a)(a)),a.state={currentUser:void 0,search:"",open:!0},a.toggleMenu=a.toggleMenu.bind(Object(l.a)(a)),a.getLogo=a.getLogo.bind(Object(l.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=m.getCurrentUser();this.getTheme(),this.getLogo(),"/"!==window.location.pathname&&"/home"!==window.location.pathname||this.setState({search:"Search"}),e&&this.setState({currentUser:e})}},{key:"notSearch",value:function(){this.setState({search:""}),!1===this.state.open&&this.toggleMenu()}},{key:"getTheme",value:function(){var e=localStorage.getItem("theme");null===e?document.documentElement.setAttribute("data-theme","light"):document.documentElement.setAttribute("data-theme",e)}},{key:"getLogo",value:function(){localStorage.getItem("theme");document.getElementsByClassName("navbar-brand")[0].children[0].src="eshoplogolight.png"}},{key:"search",value:function(){this.setState({search:"Search"}),!1===this.state.open&&this.toggleMenu()}},{key:"logOut",value:function(){!1===this.state.open&&this.toggleMenu(),this.setState({search:""}),m.logout()}},{key:"toggleMenu",value:function(){this.state.open?this.setState({open:!1}):this.setState({open:!0})}},{key:"render",value:function(){var e=this,t=this.state.currentUser;return Object(a.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},className:this.state.open?"":"hide-content",children:[Object(a.jsxs)("nav",{className:"navbar navbar-expand navcolour",children:[Object(a.jsx)(v.a,{minWidth:1224,children:Object(a.jsx)(ae,{currentUser:t,getLogo:this.getLogo,logOut:this.logOut,notSearch:this.notSearch,search:this.search})}),Object(a.jsx)(v.a,{maxWidth:1224,children:Object(a.jsx)(re,{currentUser:t,getLogo:this.getLogo,open:this.state.open,toggleMenu:this.toggleMenu,notSearch:this.notSearch,search:this.search})})]}),Object(a.jsx)(v.a,{maxWidth:1224,children:Object(a.jsx)(ne,{currentUser:t,open:this.state.open,logOut:this.logOut,notSearch:this.notSearch,search:this.search})}),Object(a.jsx)("div",{className:this.state.search,style:{display:"flex",flexGrow:"2",justifyContent:"center"},children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:["/","/home"],render:function(t){return Object(a.jsx)(T,{notSearch:e.notSearch,history:t.history,location:t.location,match:t.match})}}),Object(a.jsx)(u.b,{exact:!0,path:"/login",component:w}),Object(a.jsx)(u.b,{exact:!0,path:"/register",component:R}),Object(a.jsx)(u.b,{path:"/search/:term",component:$}),Object(a.jsx)(u.b,{exact:!0,path:"/profile",component:_}),Object(a.jsx)(u.b,{exact:!0,path:"/settings",render:function(t){return Object(a.jsx)(te,{getLogo:e.getLogo})}}),Object(a.jsx)(u.b,{path:"/user",component:F}),Object(a.jsx)(u.b,{path:"/browse",component:Y}),Object(a.jsx)(u.b,{component:ee})]})})]})}}]),s}(n.Component);c.a.render(Object(a.jsx)(D.a,{children:Object(a.jsx)(ce,{})}),document.getElementById("root"))},80:function(e,t,s){},81:function(e,t,s){}},[[202,1,2]]]);
//# sourceMappingURL=main.1b9faadd.chunk.js.map